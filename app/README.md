# ETL-пайплайн для парсинга чеков из писем и загрузки в базу данных

## Описание проекта
Этот проект реализует ETL-процесс (Extract, Transform, Load) для обработки чеков из магазинов Перекрёсток и Пятёрочка.
С помощью библиотеки imaplib данные извлекаются из писем на почтовом сервере, обрабатываются и загружаются в базу данных PostgreSQL.
Для упрощения сборки и развертывания используются Docker и Docker Compose. 
Также доступно подключение к базе данных через pgAdmin для удобного управления данными через браузер.

## Основные возможности
Извлечение: Подключение к почтовому серверу через IMAP для получения писем с чеками из Перекрёстка и Пятёрочки.
Обработка: Парсинг данных чеков, включая детали покупок, даты, суммы и наименования товаров.
Загрузка: Сохранение обработанных данных в базу данных PostgreSQL.
Контейнеризация: Использование Docker и Docker Compose для быстрого развертывания.
Администрирование БД: Подключение к pgAdmin через браузер для просмотра и управления данными.

## Требования
Python 3.8+
Docker (для контейнеризации)
Docker Compose (для оркестрации)

## Установка и запуск
1. Клонируйте репозиторий:
``` bash
git clone https://github.com/sheest/the_projects.git
cd the_projects/app
```
2. Настройте конфигурацию
Все параметры хранятся в файле окружения .env,если есть необходимость можете обновить данные.

3. Запустите проект
```bash
docker-compose up --build
```
Эта команда соберёт и запустит контейнеры для приложения, базы данных PostgreSQL и pgAdmin. 
После запуска выполните код для парсинга и загрузки данных в БД.

4. Подключение к pgAdmin:
  Перейдите в браузере по адресу: http://localhost:5050
  Войдите с учётными данными из .env или docker-compose.yml (по умолчанию: email admin@example.com, пароль admin)
  Создайте новое подключение к серверу с параметрами из .env

## Использование
Настройте почтовый сервер с поддержкой IMAP и сгенерируйте пароль приложения.
Убедитесь, что чеки от Перекрёстка и Пятёрочки попадают в нужную папку ('INBOX').
Обновите .env с актуальными параметрами.
Запустите приложение через docker-compose и выполните код парсинга,а так же загрузку данных в БД.
Используйте pgAdmin в браузере для анализа данных.

## Примечания
Поддерживаются чеки от Перекрёстка и Пятёрочки. Для других магазинов может потребоваться доработка парсера.
Убедитесь, что порты 5432 (PostgreSQL) и 5050 (pgAdmin) свободны и не заняты другими сервисами.
Если используется Gmail или Яндекс.Почта — включите IMAP и сгенерируйте пароль приложения для доступа.




